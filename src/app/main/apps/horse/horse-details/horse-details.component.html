<div *ngIf="!horse" fxLayout="column" fxLayoutAlign="center center" fxFlex>
    <mat-icon class="s-128 mb-16 select-message-icon hint-text"
              [@animate]="{value:'*',params:{delay:'300ms',scale:'0.2'}}">
        horse
    </mat-icon>
    <span class="select-message-text hint-text" [@animate]="{value:'*',params:{delay:'400ms'}}">
        <span>{{ 'horse.SELECT_A_MESSAGE_TO_READ' | translate }}</span>
    </span>
</div>

<div *ngIf="horse" fxLayout="column">

    <div class="horse-header" fxLayout="row" fxLayoutAlign="space-between start">

            <div fxLayout = "column"  fxFlex = "70" fxLayoutAlign="start start" >
                <div fxLayout="row" fxLayoutAlign="start start">
                        <div>
                            <img *ngIf="horse.from.avatar" alt="{{horse.from.name}}" src="{{horse.from.avatar}}" class="avatar big"/>                         
                        </div>

                        <div fxLayout="column" fxLayoutAlign="start start">
                            <div class="name">
                                {{horse.from.name}}
                            </div>
                            <div class="text1" fxLayout="row" fxLayoutAlign="start start">  
                                <div>{{horse.to[0].name}}</div>
                            </div>
                            <div class="text2" fxLayout="row" fxLayoutAlign="start start">  
                                <div>{{horse.to[0].name}}</div>
                            </div>
                        </div>

                </div>
                <div class="pt-12" fxLayout="row" fxLayout.xs="column" fxLayoutAlign="start center"  fxFlex>
                     
                    <mat-card   fxFlex class="card">
                            dsfsdsdfsd
                    </mat-card>
                   
                    <mat-card  fxFlex class="card">
                            dsfsdsdfsd
                    </mat-card>
                   
                </div>

            </div>
            <div fxFlex = "30">
                <mat-calendar [selected]="selectedDate" (selectedChange)="onSelect($event)"></mat-calendar>
            </div>

      
    </div>
    <div class="horse-content">

        <div class="info" fxLayout="row" fxLayoutAlign="space-between start">

            <div fxFlex fxLayout="column" fxLayoutAlign="start start">

                <div fxLayout="row" fxLayoutAlign="start start">

                    <div>
                        <img *ngIf="horse.from.avatar" alt="{{horse.from.name}}"
                             src="{{horse.from.avatar}}" class="avatar"/>

                        <div *ngIf="!horse.from.avatar" class="avatar" ms-random-class="vm.colors">
                            {{horse.from.name[0]}}
                        </div>
                    </div>

                    <div fxLayout="column" fxLayoutAlign="start start">

                        <div class="name">
                            {{horse.from.name}}
                        </div>

                        <div class="to" fxLayout="row" fxLayoutAlign="start center">
                            <div class="to-text">to</div>
                            <div>{{horse.to[0].name}}</div>
                        </div>
                    </div>
                </div>

                <a class="toggle-details" (click)="showDetails = !showDetails">
                    <span *ngIf="!showDetails">Show Details</span>
                    <span *ngIf="showDetails">Hide Details</span>
                </a>

                <div *ngIf="showDetails" class="details" fxLayout="row" fxLayoutAlign="start start">

                    <div fxLayout="column">
                        <span class="title">From:</span>
                        <span class="title">To:</span>
                        <span class="title">Date:</span>
                    </div>

                    <div fxLayout="column">
                        <span class="detail">{{horse.from.ehorse}}</span>
                        <span class="detail">{{horse.to[0].ehorse}}</span>
                        <span class="detail">{{horse.time}}</span>
                    </div>
                </div>
            </div>

            <button mat-icon-button [matMenuTriggerFor]="moreMenu" aria-label="More" (click)="$event.stopPropagation()">
                <mat-icon>more_vert</mat-icon>
            </button>

            <mat-menu #moreMenu="matMenu">
                <button mat-menu-item aria-label="Reply">
                    <mat-icon>reply</mat-icon>
                    <span>Reply</span>
                </button>

                <button mat-menu-item aria-label="Forward">
                    <mat-icon>forward</mat-icon>
                    <span>Forward</span>
                </button>

                <button mat-menu-item aria-label="Print">
                    <mat-icon>print</mat-icon>
                    <span>Print</span>
                </button>
            </mat-menu>
        </div>

        <div [innerHTML]="horse.message"></div>

    </div>

    <div *ngIf="horse.attachments" class="horse-attachments">

        <div class="title">
            <span>Attachments</span>
            ({{horse.attachments.length}})
        </div>

        <div class="attachment-list" fxLayout="row wrap">

            <div class="attachment" fxLayout="column"
                 *ngFor="let attachment of horse.attachments">

                <img class="preview" src="{{attachment.preview}}">

                <div fxLayout="column">
                    <a href="#" onclick="event.preventDefault()">View</a>
                    <a href="#" onclick="event.preventDefault()">Download</a>
                    <div class="size">({{attachment.size}})</div>
                </div>

            </div>
        </div>
    </div>
</div>
